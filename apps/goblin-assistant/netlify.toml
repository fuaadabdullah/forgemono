[build]
# Build commands for different directories
command = "echo 'Backend build complete'"
publish = "backend"

[build.environment]
PYTHON_VERSION = "3.11"

# Backend service configuration
[[redirects]]
from = "/api/*"
to = "http://localhost:8001/:splat"
status = 200

# Health check endpoint
[[redirects]]
from = "/health"
to = "http://localhost:8001/health"
status = 200

# Settings endpoints
[[redirects]]
from = "/settings/*"
to = "http://localhost:8001/settings/:splat"
status = 200

# Routing endpoints
[[redirects]]
from = "/routing/*"
to = "http://localhost:8001/routing/:splat"
status = 200

# Execute endpoints
[[redirects]]
from = "/execute/*"
to = "http://localhost:8001/execute/:splat"
status = 200

# API keys endpoints
[[redirects]]
from = "/api-keys/*"
to = "http://localhost:8001/api-keys/:splat"
status = 200

# Auth endpoints
[[redirects]]
from = "/auth/*"
to = "http://localhost:8001/auth/:splat"
status = 200

# Search endpoints
[[redirects]]
from = "/search/*"
to = "http://localhost:8001/search/:splat"
status = 200

# Parse endpoints
[[redirects]]
from = "/parse/*"
to = "http://localhost:8001/parse/:splat"
status = 200

# Root endpoint
[[redirects]]
from = "/api"
to = "http://localhost:8001/"
status = 200

# Frontend SPA fallback
[[redirects]]
from = "/*"
to = "/index.html"
status = 200

[functions]
directory = "backend"
