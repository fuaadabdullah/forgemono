apiVersion: gateway.envoyproxy.io/v1alpha1
kind: SecurityPolicy
metadata:
  name: cors-policy
  namespace: overmind-prod
  labels:
    app: overmind
    policy: cors
spec:
  targetRef:
    group: gateway.networking.k8s.io
    kind: Gateway
    name: overmind-gateway

  cors:
    allowOrigins:
    - https://dashboard.overmind.example.com
    - https://*.overmind.example.com

    allowMethods:
    - GET
    - POST
    - PUT
    - DELETE
    - PATCH
    - OPTIONS

    allowHeaders:
    - Content-Type
    - Authorization
    - X-Request-ID
    - X-Correlation-ID

    exposeHeaders:
    - X-Request-ID
    - X-RateLimit-Limit
    - X-RateLimit-Remaining
    - X-RateLimit-Reset

    maxAge: 86400
    allowCredentials: true
