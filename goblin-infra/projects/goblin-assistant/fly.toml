# fly.toml app configuration file generated for goblin-assistant on 2025-12-03T15:11:10-05:00
#
# See https://fly.io/docs/reference/configuration/ for information about how to use this file.
#

app = 'goblin-backend'
primary_region = 'iad'

[build]
dockerfile = 'Dockerfile'

[env]
LOG_LEVEL = 'info'
PORT = '8001'

[processes]
app = 'uvicorn main:app --host 0.0.0.0 --port 8001'

[[mounts]]
source = 'chroma_db'
destination = '/app/chroma_db'

[[services]]
protocol = 'tcp'
internal_port = 8001
processes = ['app']

[[services.ports]]
port = 80
handlers = ['http']

[[services.ports]]
port = 443
handlers = ['tls', 'http']

[[services.http_checks]]
interval = '15s'
timeout = '5s'
grace_period = '5s'
path = '/health'

[[vm]]
memory = '1gb'
cpu_kind = 'shared'
cpus = 1
