apiVersion: v1
kind: ConfigMap
metadata:
  name: kubecost-daily-alert
  namespace: kubecost
  labels:
    app: kubecost
    alert-type: budget
data:
  alert.json: |
    {
      "name": "overmind-daily-budget",
      "type": "budget",
      "enabled": true,
      "threshold": 100,
      "window": "1d",
      "aggregation": "namespace",
      "filter": {
        "namespace": ["overmind-prod", "overmind-dev"]
      },
      "notifications": {
        "slack": {
          "enabled": true,
          "webhookUrl": "${SLACK_WEBHOOK_URL}",
          "channel": "#overmind-alerts",
          "username": "Kubecost",
          "icon_emoji": ":moneybag:",
          "message": "⚠️ Daily budget exceeded for {{namespace}}: ${{cost}} (threshold: $100)"
        }
      }
    }
